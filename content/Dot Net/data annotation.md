با استفاده از این ها میتونیم یه سری کانفیگ روی entity ها پیاده سازی کنیم

![[Pasted image 20241211165806.png]]

![[Pasted image 20241211165808.png]]

![[Pasted image 20241211165811.png]]

![[Pasted image 20241211165813.png]]

از این دستور context.database.ensureCreated استفاده میکنیم این دستور میاد از روی entity که داریم میاد دیتا بیس رو درست میکنه 
فقط دقت کنید که این توی نسخه ی تست استفاده میشه نه نسخه ی production اونجا ممکنه بزنه کل دیتا ها رو خراب کنه 

![[Pasted image 20241211165829.png]]

![[Pasted image 20241211165840.png]]

![[Pasted image 20241211165843.png]]

خوب وقتی که روی id کلیک میکنیم و میبینیم که اون رو به عنوان کلید اصلی در نظر گرفته و identity در نظرش گرفته و گفته که یکی یکی هم میره بالا
با استفاده از not mapped میتونیم یه پراپرتی رو در دیتابیس ذخیره نکنیم

![[Pasted image 20241211165851.png]]

خوب حالا وقتی که این کار رو کردیم برای این که بیاد و روی دیتا بیس اعمال بشه ما باید اول قبلش اون اولی که ساختیم رو پاک کنیم و دوباره بیام بسازیمش

![[Pasted image 20241211165859.png]]

![[Pasted image 20241211165903.png]]

خوب همونطوری که میبنید دیگه price رو نداریم 
و این که تایپی که توی دیتا بیس برای name تعیین شده nvarchar هستش که ما میخوایم این تغییر بدیم ، چجوری؟ 

![[Pasted image 20241211165909.png]]

![[Pasted image 20241211165912.png]]

 اگر بخوایم یه پارامتر اجباری باشه اینطوری میایم از attribute این استفاده میکنیم:
![[Pasted image 20241211165918.png]]

![[Pasted image 20241211165921.png]]


و همونطوری که میبینید اجازه برای null بودن نداره 
حتی میتونیم محدودیت هم بزاریم براش :

![[Pasted image 20241211165930.png]]

یعنی تا 500 تا کارکتر 
خوب حالا اگر به هر دلیلی بخوایم نامی که توی دیتا بیس داریم این پراپرتی رو ذخیره میکنیم متفاوت باشه از این نامش توی این کلاس یا همون entity میتونیم اینطوری از این قابلیت استفاده کنیم


![[Pasted image 20241211165937.png]]

اینجا به طور مثال میخوام با des ذخیره بشه 

![[Pasted image 20241211165944.png]]

میتونیم اسم table رو هم عوض کنیم :

![[Pasted image 20241211165953.png]]

![[Pasted image 20241211165957.png]]

میتونیم schima هم برای جدولمون تعیین کنیم ، این طوری :

![[Pasted image 20241211170006.png]]

![[Pasted image 20241211170012.png]]

خوب یه قابلیت دیگه ای که داریم اینه که میتونیم با استفاده از on model builder بیایم و تعیین کنیم که هر کدوم از دیتا بیس ها که براش اسکیما تعیین نکردیم به صورت دیفالت براشون bugeto ست بشه

![[Pasted image 20241211170020.png]]


خوب حالا یه داستانی که هست اینه که وقتی که میخوایم یه کلید اصلی رو خودمون تعیین کنیم میتونیم بیایم و اینطوری تعیینش کنیم:

![[Pasted image 20241211170025.png]]

با key و keyId و بعد برای تعیین این که چجوری توی دیتا بیس این ها افزایش پیدا کنند یعنی وقتی که میخوایم رکورد جدید اضافه کنیم اون کلیده چجوری شمارش میشه و تغییر میکنه میتونیم از databaseGenerated استفاده کنیم توی این حالت عکس بالا به صورت همون دیفالت خوده دیتا بیسه که یکی یکی عددش رو میبره بالا حالا اگر بخوایم تغییرش بدیم اینجوری باید بنویسیم

![[Pasted image 20241211170034.png]]

حالا وقتی که none میزاریم دیگه باید خودمون المان ها رو درست کنیم و بفرستیم باهاش توی دیتابیس

خوب حالا اگر تعیین نکنیم و درست نکنیم چی میشه ؟ اینطوری میشه که به صورت دیفالت اولیه 0 میشه ولی وقتی که میخوایم دومی رو اضافه کنیم به ارور میخوریم :

![[Pasted image 20241211170046.png]]

اینطوری درست میشه :

![[Pasted image 20241211170053.png]]

خوب بهتره که توی لایه ی entity از هیچ چیزی به جر کلاس های ساده ی C# استفاده نکنیم، ولی انجا همونطوری که میبینید ما اومدیم این ها رو به یه سری namespace دیگه وابسته شون کردیم که این خلاف قواعد کد نویسی تمیز هستش که برای همین میایم از fulent استفاده میکنیم

اینجوری لایه ی domain بدون داشتن وابستگی اجرا میشه 

![[Pasted image 20241211170100.png]]