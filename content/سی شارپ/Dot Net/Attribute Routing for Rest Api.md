![[Pasted image 20241208135406.png]]
خوب دقت کنید که set as startup هم بزنیم براش

![[Pasted image 20241208135418.png]]

خوب دقت کنید که اینجا ما اومدیم از middleware که اسمش swagger هستش استفاده میکنم
به صورت اتوماتیک برای api میاد داکیومنت میکنه و محیط تست هم ایجاد میکنه 
دیگه نیازی نیست با postman بیایم تست کنیم 

خوب در حالت عادی ما از app use routing , app useEndpoints استفاده میکردیم برای routing 
ولی اینجا به جاش اومدیم از map controllers استفاده کردیم که با استفاده ازش این قابلیت رو داریم که از attribute ها استفاده میکردیم 

![[Pasted image 20241208135500.png]]

![[Pasted image 20241208135506.png]]

خودش به صورت اتوماتیک براش route نوشته و attibute هم گذاشته 



![[Pasted image 20241208135529.png]]


خوب اینجا دیگه چون view نداریم میایم از کد های http استفاده میکنیم 

![[Pasted image 20241208135546.png]]

اینجا ok همون کد 200 رو برامون میفرسته 

![[Pasted image 20241208135557.png]]

اون قسمتی که ابی رنگ هستش رو میگیریم 

![[Pasted image 20241208135612.png]]


بعد اینطوری بهمون نشون میده 

![[Pasted image 20241208135626.png]]

خطا اینه که باید متد http رو هم باید براش مشخص کنیم 
ببیند اینجا api ما درست داره کار میکنه ولی این ارور از سمت  swagger هستش برای این که نمیتونه اون داکیونت رو درست کنه 

![[Pasted image 20241208135641.png]]

توی postman داره درست کار میکنه 

خوب اینجا 

![[Pasted image 20241208135655.png]]

این معادل همون مسیری که به صورت پیش فرض توی معماری mvc اوکی شده 
میتونیم routing چند تایی هم داشته باشیم 

![[Pasted image 20241208135711.png]]

![[Pasted image 20241208135718.png]]

خوب از این طریق میتونیم ip رو هم براش تعریف کنیم و اونور توی swagger بگیریم 

![[Pasted image 20241208135731.png]]

خوب اینجا رو خیلی دقت کنیم 

![[Pasted image 20241208135742.png]]

اینجا ما اومدیم تعریف کردیم که خودت بیا اتوماتیک route رو بساز 
چطوری ؟ 
گفتیم توی api برو توی controller که خوب اینجا controller مون میشه home چون طبق convention اسم این کنترلر رو گذاشتیم Home Controller و اون قسمت  home اتوماتیک تشخیص داده میشه و قسمت بعدی اینه که ما یه action رو اومدیم تعریف کردیم به اسم index و اینطوری اومده از سمت کنترلر و اکشن یه route رو به صورت اتوماتیک درست کرده 
البته یکی اینه 

![[Pasted image 20241208135754.png]]

یکی هم اون بالیه که جفتش اتوماتیک بدست اومده 
خوب حالا با استفاده از همین قابلیت میایم مینویسیم که هر اکشنی که توی این کنترلر تعیین شد بیا اتوماتیک route اش رو بساز ، اینطوری: میایم بالای کلاس کنترلر مینویسیم 

![[Pasted image 20241208135806.png]]

  اینطوری هم میشه که یکم عجیبه 

![[Pasted image 20241208135818.png]]

![[Pasted image 20241208135825.png]]


با علامت ~ میتونیم اون route رو از ریشه تعیین کنیم 

![[Pasted image 20241208135836.png]]

متونیم بر اساس متد های مختلف http بیایم و route های مختلف رو درست کنیم 

![[Pasted image 20241208135851.png]]

خوب اینجا میاد بر اساس scaffolding عملیات crud رو به صورت اتوماتیک برامون آماده میکنیم 

![[Pasted image 20241208135902.png]]

![[Pasted image 20241208135909.png]]

خوب حالا همونطوری که میبنیم بر اساس , delete , post , Get , put اومدیم روی یه آدرس تعیین کردیم که هر کدوم چی کار کنن 

میتونیم برای route هامون order تعیین کنیم 
این رو ما توی controller قسمت home نوشتیم 
![[Pasted image 20241208135919.png]]

بعد میریم برای خوده product هم یه کنترلر میسازیم 
بعدش میایم routing خودش رو غیر فعال میکنیم 


![[Pasted image 20241208135933.png]]

خوب اینجا اتفاقی که میوفته اینه که ما برای یک مسیر  اومدیم در دو جا تعریفش کردیم و همین باعث ارور میشه
چون یکیش توی کنترلر home هستش یکی دیگه اش هم توی خوده کنترلر Product


![[Pasted image 20241208135944.png]]


خوب توی این حالت یه آپشنی که داریم استفاده کردن از order هستش
   خوب حالا وقتی که order رو هر چقدر منفی بودنش بیشتر باشه یعنی اولویت بالاتری برای اجرا شدن داره 
![[Pasted image 20241208135956.png]]


وقتی که اون یکی 0 باشه و این بالاییه -1 این اجرا میشه و وقتی که بیایم برای اون یکی -2  رو بزاریم ف اول اون یکی اجرا میشه که -2 داره 


![[Pasted image 20241208140008.png]]

توی این پروسه وقتی که این کار رو کردیم دیگه swagger میپوکه ولی با پستمن میتونیم تستش کنیم یا break point بزاریم 
و یه قابلیت دیگه این هستش که name بدیم به route 

![[Pasted image 20241208140018.png]]

